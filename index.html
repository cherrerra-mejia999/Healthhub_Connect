
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthub Connect</title>
    <link rel="stylesheet" href="index_styles.css">
</head>
<body>
    <div class="Title">
        <h1>Welcome to Healthub Connect!</h1>
        <div id="userInfo" style="margin:0; text-align: center;"></div>
    </div>
    
    <div class="top-bar">
        <button class="signin-btn" id="authButton" onclick="handleAuth()">Sign In</button>
    </div>
    
    <hr>
    
    <h2 class="Navigations">
        <a href="documents.html">Documents</a>
        <a href="tracker.html">Trackers</a>
        <a href="assistant.html">AI Health Assistant</a>
        <a href="appointments.html">Appointments</a>
        <a href="insurance.html">Insurance Hub</a>
        <a href="summaries.html">Visit Summaries</a>
        <a href="family.html">Family Access</a>
        <a href="payments.html">Payments</a>
        <a href="support.html">Support Call Center</a>
        <a href="links.html">Helpful Links</a>
        <a href="about.html">About</a>
    </h2>
    
    <hr>
    
    <section>
        <h2>About Healthub Connect</h2>
        <p>
            Healthub Connect is a modern health platform that helps users manage
            their personal and medical data efficiently. From tracking your daily
            vitals to managing appointments, our mission is to keep you connected to
            your health.
        </p>
    </section>
    
    <section>
        <h2>Core Features</h2>
        <ul>
            <li>Upload and access health documents anytime</li>
            <li>Track your heart rate and blood sugar daily</li>
            <li>Set reminders for medication and appointments</li>
            <li>Communicate directly with a medical AI chatbot</li>
            <li>Securely manage insurance and payment details</li>
            <li>And more</li>  
        </ul>
    </section>
    
    <img src="health_placeholder.jpeg" alt="Healthub Connect" style="width:100%;max-width:600px; display: block; margin: 20px auto;">

    <script>
        // Simple Supabase initialization for index page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, waiting for Supabase...');
            
            setTimeout(function() {
                try {
                    const supabaseUrl = 'https://hbtgwzneuhdqlmriwvje.supabase.co';
                    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhidGd3em5ldWhkcWxtcml3dmplIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNDI5MTQsImV4cCI6MjA3NTkxODkxNH0.1v1OLYSEPRBKaZWQu1sJo8DoRzYePfdc7Zcs8i8TF78';
                    
                    if (typeof window.supabase === 'undefined') {
                        const script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js';
                        script.onload = function() {
                            initializeApp();
                        };
                        document.head.appendChild(script);
                    } else {
                        initializeApp();
                    }
                    
                    function initializeApp() {
                        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
                        console.log('✅ Supabase initialized for index!');
                        
                        // Check authentication state
                        async function checkAuth() {
                            const { data: { session } } = await supabase.auth.getSession();
                            const authButton = document.getElementById('authButton');
                            const userInfo = document.getElementById('userInfo');

                            if (session) {
                                // User is signed in
                                console.log('User is signed in:', session.user);
                                const firstName = session.user.user_metadata?.first_name || session.user.email;
                                userInfo.innerHTML = `Hello, ${firstName} — <a href="#" onclick="signOut()">Sign Out</a>`;
                                authButton.style.display = 'none';
                            } else {
                                // User is signed out
                                userInfo.innerHTML = '';
                                authButton.style.display = 'block';
                                authButton.textContent = 'Sign In';
                            }
                        }

                        window.handleAuth = function() {
                            window.location.href = 'signin.html';
                        }

                        window.signOut = async function() {
                            await supabase.auth.signOut();
                            window.location.reload();
                        }

                        // Check auth state on page load
                        checkAuth();

                        // Listen for auth state changes
                        supabase.auth.onAuthStateChange((event, session) => {
                            console.log('Auth state changed:', event);
                            if (event === 'SIGNED_IN' || event === 'SIGNED_OUT') {
                                checkAuth();
                            }
                        });
                    }
                    
                } catch (error) {
                    console.error('Initialization error:', error);
                }
            }, 100);
        });
    </script>
</body>
</html>

